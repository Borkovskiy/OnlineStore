{"ast":null,"code":"import _regeneratorRuntime from\"E:/\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442/24.08.2021/OnlineStore/src/main/js/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442/24.08.2021/OnlineStore/src/main/js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/\\u043F\\u0440\\u043E\\u0435\\u043A\\u0442/24.08.2021/OnlineStore/src/main/js/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect,useRef}from'react';import{DataContext}from'../DataProvider';import{Link,useParams}from'react-router-dom';import'../css/Details.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Details=function Details(props){var _useContext=useContext(DataContext),addToCart=_useContext.addToCart,spinner=_useContext.spinner;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),index=_useState6[0],setIndex=_useState6[1];var _useParams=useParams(),id=_useParams.id;var myRef=useRef();useEffect(function(){function getProduct(){return _getProduct.apply(this,arguments);}function _getProduct(){_getProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios(\"https://online-store-120.herokuapp.com/store/products/\".concat(id));case 2:result=_context.sent;console.log(result);setProduct(result.data);setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getProduct.apply(this,arguments);}if(id)getProduct();},[id]);if(isLoading){return/*#__PURE__*/_jsx(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\",style:spinner});}var handleTab=function handleTab(index){setIndex(index);var images=myRef.current.children;for(var i=0;i<images.length;i++){images[i].className=images[i].className.replace(\"active\",\"\");}images[index].className=\"active\";};var name=product.name,color=product.color,shortDescription=product.shortDescription,price=product.price,description=product.description,productImage=product.productImage;console.log(product);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product_img\",children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(productImage[index])})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsx(\"p\",{children:shortDescription}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Color: \",/*#__PURE__*/_jsx(\"span\",{children:color})]}),/*#__PURE__*/_jsx(\"p\",{children:description}),/*#__PURE__*/_jsx(\"div\",{className:\"images\",ref:myRef,children:productImage.map(function(img,index){return/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(img),alt:\"\",onClick:function onClick(){return handleTab(index);}},index);})}),/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"cart\",onClick:function onClick(){return addToCart(+id);},children:\"Add to cart\"})]})]},id)});};export default Details;","map":{"version":3,"sources":["E:/проект/24.08.2021/OnlineStore/src/main/js/src/components/section/Details.js"],"names":["React","useContext","useState","useEffect","useRef","DataContext","Link","useParams","axios","Details","props","addToCart","spinner","product","setProduct","isLoading","setLoading","index","setIndex","id","myRef","getProduct","result","console","log","data","handleTab","images","current","children","i","length","className","replace","name","color","shortDescription","price","description","productImage","map","img"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from 'react'\r\nimport { DataContext } from '../DataProvider'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport '../css/Details.css'\r\nimport axios from 'axios';\r\n\r\nconst Details = (props) => {\r\n    const { addToCart, spinner } = useContext(DataContext)\r\n    const [product, setProduct] = useState([]);\r\n    const [isLoading, setLoading] = useState(true);\r\n    const [index, setIndex] = useState(0)\r\n\r\n    const { id } = useParams();\r\n\r\n    const myRef = useRef();\r\n\r\n    useEffect(() => {\r\n        async function getProduct() {\r\n            const result = await axios(\r\n                `https://online-store-120.herokuapp.com/store/products/${id}`\r\n            );\r\n            console.log(result);\r\n            setProduct(result.data);\r\n            setLoading(false)\r\n        }\r\n        if (id) getProduct();\r\n    }, [id]);\r\n\r\n    if (isLoading) {\r\n        return <img src=\"https://upload.wikimedia.org/wikipedia/commons/b/b1/Loading_icon.gif\" style={spinner} />\r\n      }\r\n\r\n    const handleTab = index => {\r\n        setIndex(index);\r\n        const images = myRef.current.children;\r\n        for(let i = 0; i < images.length; i++) {\r\n            images[i].className = images[i].className.replace(\"active\", \"\")\r\n        }\r\n        images[index].className = \"active\";\r\n    };\r\n\r\n    const {\r\n        name, color, shortDescription, price, description, productImage\r\n    } = product;\r\n    console.log(product)\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className=\"details\" key={id}>\r\n                <div className=\"product_img\">\r\n                    <img src={`data:image/jpeg;base64,${productImage[index]}`} />\r\n                </div>\r\n                <div className=\"box\">\r\n                    <div className=\"row\">\r\n                        <h2>{name}</h2>\r\n                        <span>${price}</span>\r\n                    </div>\r\n                    <p>{shortDescription}</p>\r\n                    <p>Color: <span>{color}</span></p>\r\n                    <p>{description}</p>\r\n                    <div className=\"images\" ref={myRef}>\r\n                        {\r\n                            productImage.map((img, index) => (\r\n                                <img src={`data:image/jpeg;base64,${img}`} alt=\"\" key={index}\r\n                                    onClick={() => handleTab(index)}\r\n                                />\r\n                            ))\r\n                        }\r\n                    </div>\r\n                    <Link to=\"/cart\" className=\"cart\" onClick={() => addToCart(+id)}>\r\n                        Add to cart\r\n                    </Link>\r\n                </div>\r\n            </div>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default Details\r\n"]},"metadata":{},"sourceType":"module"}