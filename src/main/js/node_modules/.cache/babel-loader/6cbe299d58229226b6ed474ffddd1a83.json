{"ast":null,"code":"import _regeneratorRuntime from\"/Users/macuser/Desktop/Project Online-store/OnlineStore/src/main/js/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/macuser/Desktop/Project Online-store/OnlineStore/src/main/js/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/macuser/Desktop/Project Online-store/OnlineStore/src/main/js/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect,useRef}from'react';import{DataContext}from'../DataProvider';import{Link,useParams}from'react-router-dom';import'../css/Details.css';import axios from'axios';import Backdrop from'@material-ui/core/Backdrop';import CircularProgress from'@material-ui/core/CircularProgress';import{makeStyles}from'@material-ui/core/styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Details=function Details(props){var _useContext=useContext(DataContext),addToCart=_useContext.addToCart,spinner=_useContext.spinner;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),index=_useState6[0],setIndex=_useState6[1];var useStyles=makeStyles(function(theme){return{backdrop:{zIndex:theme.zIndex.drawer+1,color:'#fff'}};});var classes=useStyles();var _useParams=useParams(),id=_useParams.id;var myRef=useRef();useEffect(function(){function getProduct(){return _getProduct.apply(this,arguments);}function _getProduct(){_getProduct=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios(\"https://online-store-120.herokuapp.com/store/products/\".concat(id));case 2:result=_context.sent;console.log(result);setProduct(result.data);setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return _getProduct.apply(this,arguments);}if(id)getProduct();},[id]);if(isLoading){return/*#__PURE__*/_jsx(Backdrop,{className:classes.backdrop,open:true,children:/*#__PURE__*/_jsx(CircularProgress,{color:\"inherit\"})});}var handleTab=function handleTab(index){setIndex(index);var images=myRef.current.children;for(var i=0;i<images.length;i++){images[i].className=images[i].className.replace(\"active\",\"\");}images[index].className=\"active\";};var name=product.name,color=product.color,shortDescription=product.shortDescription,price=product.price,description=product.description,productImage=product.productImage;console.log(product);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product_img\",children:/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(productImage[index])})}),/*#__PURE__*/_jsxs(\"div\",{className:\"box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsxs(\"span\",{children:[\"$\",price]})]}),/*#__PURE__*/_jsx(\"p\",{children:shortDescription}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Color: \",/*#__PURE__*/_jsx(\"span\",{children:color})]}),/*#__PURE__*/_jsx(\"p\",{children:description}),/*#__PURE__*/_jsx(\"div\",{className:\"images\",ref:myRef,children:productImage.map(function(img,index){return/*#__PURE__*/_jsx(\"img\",{src:\"data:image/jpeg;base64,\".concat(img),alt:\"\",onClick:function onClick(){return handleTab(index);}},index);})}),/*#__PURE__*/_jsx(Link,{to:\"/cart\",className:\"cart\",onClick:function onClick(){return addToCart(+id);},children:\"Add to cart\"})]})]},id)});};export default Details;","map":{"version":3,"sources":["/Users/macuser/Desktop/Project Online-store/OnlineStore/src/main/js/src/components/section/Details.js"],"names":["React","useContext","useState","useEffect","useRef","DataContext","Link","useParams","axios","Backdrop","CircularProgress","makeStyles","Details","props","addToCart","spinner","product","setProduct","isLoading","setLoading","index","setIndex","useStyles","theme","backdrop","zIndex","drawer","color","classes","id","myRef","getProduct","result","console","log","data","handleTab","images","current","children","i","length","className","replace","name","shortDescription","price","description","productImage","map","img"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from 'react'\nimport { DataContext } from '../DataProvider'\nimport { Link, useParams } from 'react-router-dom'\nimport '../css/Details.css'\nimport axios from 'axios';\nimport Backdrop from '@material-ui/core/Backdrop';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst Details = (props) => {\n    const { addToCart, spinner } = useContext(DataContext)\n    const [product, setProduct] = useState([]);\n    const [isLoading, setLoading] = useState(true);\n    const [index, setIndex] = useState(0)\n\n    const useStyles = makeStyles((theme) => ({\n        backdrop: {\n          zIndex: theme.zIndex.drawer + 1,\n          color: '#fff',\n        },\n      }));\n  \n      const classes = useStyles()\n\n    const { id } = useParams();\n\n    const myRef = useRef();\n\n    useEffect(() => {\n        async function getProduct() {\n            const result = await axios(\n                `https://online-store-120.herokuapp.com/store/products/${id}`\n            );\n            console.log(result);\n            setProduct(result.data);\n            setLoading(false)\n        }\n        if (id) getProduct();\n    }, [id]);\n\n    if (isLoading) {\n        return <Backdrop className={classes.backdrop} open>\n          <CircularProgress color=\"inherit\" />\n        </Backdrop>\n      }\n\n    const handleTab = index => {\n        setIndex(index);\n        const images = myRef.current.children;\n        for(let i = 0; i < images.length; i++) {\n            images[i].className = images[i].className.replace(\"active\", \"\")\n        }\n        images[index].className = \"active\";\n    };\n\n    const {\n        name, color, shortDescription, price, description, productImage\n    } = product;\n    console.log(product)\n\n\n    return (\n        <>\n            <div className=\"details\" key={id}>\n                <div className=\"product_img\">\n                    <img src={`data:image/jpeg;base64,${productImage[index]}`} />\n                </div>\n                <div className=\"box\">\n                    <div className=\"row\">\n                        <h2>{name}</h2>\n                        <span>${price}</span>\n                    </div>\n                    <p>{shortDescription}</p>\n                    <p>Color: <span>{color}</span></p>\n                    <p>{description}</p>\n                    <div className=\"images\" ref={myRef}>\n                        {\n                            productImage.map((img, index) => (\n                                <img src={`data:image/jpeg;base64,${img}`} alt=\"\" key={index}\n                                    onClick={() => handleTab(index)}\n                                />\n                            ))\n                        }\n                    </div>\n                    <Link to=\"/cart\" className=\"cart\" onClick={() => addToCart(+id)}>\n                        Add to cart\n                    </Link>\n                </div>\n            </div>\n\n        </>\n    )\n}\n\nexport default Details\n"]},"metadata":{},"sourceType":"module"}