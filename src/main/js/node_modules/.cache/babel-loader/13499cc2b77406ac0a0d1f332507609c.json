{"ast":null,"code":"import _toConsumableArray from\"E:/\\u0431\\u0435\\u043A\\u0430\\u043F/15.08.2021/OnlineStore/src/main/js/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/\\u0431\\u0435\\u043A\\u0430\\u043F/15.08.2021/OnlineStore/src/main/js/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,createContext}from'react';import'./css/Order.css';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";export var DataContext=/*#__PURE__*/createContext();export var DataProvider=function DataProvider(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),total=_useState6[0],setTotal=_useState6[1];var addToCart=function addToCart(id){console.log(cart);var check=cart.every(function(item){return item.id!==id;});if(check){var data=products.filter(function(product){return product.id===id;});setCart([].concat(_toConsumableArray(cart),_toConsumableArray(data)));}else{alert(\"The product has been added to cart.\");}};var decrease=function decrease(id){cart.forEach(function(item){if(item._id===id){item.count===1?item.count=1:item.count-=1;}});setCart([cart]);getTotal();};var increase=function increase(id){cart.forEach(function(item){if(item._id===id){item.count+=1;}});setCart([cart]);getTotal();};var getTotal=function getTotal(){var res=cart.reduce(function(prev,item){return prev+item.price*item.count;},0);setTotal({total:res});};var removeProduct=function removeProduct(id){if(window.confirm(\"Do you want to delete this product?\")){cart.forEach(function(item,index){if(item._id===id){cart.splice(index,1);}});setCart([cart]);getTotal();}};useEffect(function(){var url='https://online-store-120.herokuapp.com/store/products';axios.get(url).then(function(response){setProducts(response.data);console.log(response.data);}).catch(function(error){return console.log(error);});},[]);// console.log(products)\nreturn/*#__PURE__*/_jsx(DataContext.Provider,{value:{data:products,addToCart:addToCart,cart:cart,decrease:decrease,increase:increase,total:total,getTotal:getTotal,removeProduct:removeProduct},children:props.children});};","map":{"version":3,"sources":["E:/бекап/15.08.2021/OnlineStore/src/main/js/src/components/DataProvider.js"],"names":["React","useState","useEffect","createContext","axios","DataContext","DataProvider","props","products","setProducts","cart","setCart","total","setTotal","addToCart","id","console","log","check","every","item","data","filter","product","alert","decrease","forEach","_id","count","getTotal","increase","res","reduce","prev","price","removeProduct","window","confirm","index","splice","url","get","then","response","catch","error","children"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, createContext } from 'react';\r\nimport './css/Order.css';\r\nimport axios from 'axios';\r\n\r\nexport const DataContext = createContext()\r\n\r\nexport const DataProvider = (props) => {\r\n  const [products, setProducts] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n  const [total, setTotal] = useState(0);\r\n\r\n\r\n  const addToCart = (id) => {\r\n    console.log(cart)\r\n    const check = cart.every(item => {\r\n      return item.id !== id\r\n    })\r\n    if (check) {\r\n      const data = products.filter(product => {\r\n        return product.id === id\r\n      })\r\n      setCart([...cart, ...data])\r\n    } else {\r\n      alert(\"The product has been added to cart.\")\r\n    }\r\n  };\r\n\r\n  const decrease = id => {\r\n    cart.forEach(item => {\r\n      if (item._id === id) {\r\n        item.count === 1 ? item.count = 1 : item.count -= 1;\r\n      }\r\n    })\r\n    setCart([cart]);\r\n    getTotal();\r\n  }\r\n\r\n  const increase = id => {\r\n    cart.forEach(item => {\r\n      if (item._id === id) {\r\n        item.count += 1;\r\n      }\r\n    })\r\n    setCart([cart]);\r\n    getTotal();\r\n  }\r\n\r\n  const getTotal = () => {\r\n    const res = cart.reduce((prev, item) => {\r\n      return prev + (item.price * item.count);\r\n    }, 0)\r\n    setTotal({ total: res })\r\n  }\r\n\r\n  const removeProduct = id => {\r\n    if (window.confirm(\"Do you want to delete this product?\")) {\r\n        cart.forEach((item, index) => {\r\n            if (item._id === id) {\r\n                cart.splice(index, 1)\r\n            }\r\n        })\r\n        setCart([cart]);\r\n        getTotal();\r\n    }\r\n}\r\n\r\n  useEffect(() => {\r\n    let url = 'https://online-store-120.herokuapp.com/store/products';\r\n    axios\r\n      .get(url)\r\n      .then(function (response) {\r\n        setProducts(response.data);\r\n        console.log(response.data);\r\n      })\r\n      .catch((error) => console.log(error));\r\n  }, []);\r\n  // console.log(products)\r\n\r\n  return (\r\n    <DataContext.Provider value={{ data: products, addToCart, cart, decrease, increase, total, getTotal, removeProduct }}>\r\n      {props.children}\r\n    </DataContext.Provider>\r\n  );\r\n\r\n\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}